'use strict';

const napi = require('./util/napi.js');
const compile = require('./util/compile.js');
const handleGypOpts = require('./util/handle_gyp_opts.js');

module.exports = exports = configure;

exports.usage = 'Attempts to configure node-gyp or nw-gyp build';

function configure(gyp, argv, callback) {
  handleGypOpts(gyp, argv, (err, result) => {
    if (err) {
      return callback(err);
    }

    let finalArgs = result.gyp.concat(result.pre);

    // Pull select node-gyp configure options out of the npm environment
    const knownGypArgs = ['dist-url', 'python', 'nodedir', 'ms
